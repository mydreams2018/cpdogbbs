æ³¨æ„ï¼šæ­¤åŠŸèƒ½é€‚ç”¨äº react-scripts@1.0.0 åŠæ›´é«˜ç‰ˆæœ¬ã€‚

.envï¼šé»˜è®¤å€¼ã€‚
.env.localï¼šæœ¬åœ°è¦†ç›–ã€‚æ­¤æ–‡ä»¶å°†é’ˆå¯¹é™¤æµ‹è¯•ä¹‹å¤–çš„æ‰€æœ‰ç¯å¢ƒåŠ è½½ã€‚
.env.developmentã€ã€ï¼šç‰¹å®šäºç¯å¢ƒçš„è®¾ç½®ã€‚.env.test.env.production
.env.development.localã€ ã€ ï¼š ç‰¹å®šäºç¯å¢ƒçš„è®¾ç½®çš„æœ¬åœ°è¦†ç›–ã€‚.env.test.local.env.production.local
å·¦ä¾§çš„æ–‡ä»¶æ¯”å³ä¾§çš„æ–‡ä»¶å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼š

npm start: , , , .env.development.local .env.local .env.development .env
npm run build: , , , .env.production.local .env.local .env.production .env
npm testï¼š ï¼Œ ï¼Œ ï¼ˆç¼ºå°‘æ³¨é‡Šï¼‰ .env.test.local .env.test .env .env.local

  // âš ï¸ createRows() æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè¢«è°ƒç”¨
  const [rows, setRows] = useState(createRows(props.count));
    // âœ… createRows() åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡
    const [rows, setRows] = useState(() => createRows(props.count));

    æœ‰ç±»ä¼¼ forceUpdate çš„ä¸œè¥¿å—ï¼Ÿ
    å¦‚æœå‰åä¸¤æ¬¡çš„å€¼ç›¸åŒï¼ŒuseState å’Œ useReducer Hook éƒ½ä¼šæ”¾å¼ƒæ›´æ–°ã€‚åŸåœ°ä¿®æ”¹ state å¹¶è°ƒç”¨ setState ä¸ä¼šå¼•èµ·é‡æ–°æ¸²æŸ“ã€‚
    é€šå¸¸ï¼Œä½ ä¸åº”è¯¥åœ¨ React ä¸­ä¿®æ”¹æœ¬åœ° stateã€‚ç„¶è€Œï¼Œä½œä¸ºä¸€æ¡å‡ºè·¯ï¼Œä½ å¯ä»¥ç”¨ä¸€ä¸ªå¢é•¿çš„è®¡æ•°å™¨æ¥åœ¨ state æ²¡å˜çš„æ—¶å€™ä¾ç„¶å¼ºåˆ¶ä¸€æ¬¡é‡æ–°æ¸²æŸ“ï¼š
     const [ignored, forceUpdate] = useReducer(x => x + 1, 0);
      function handleClick() {
        forceUpdate();
      }

      function Example({ someProp }) {
        function doSomething() {
          console.log(someProp);
        }
        useEffect(() => {
          doSomething();
        }, []); // ğŸ”´ è¿™æ ·ä¸å®‰å…¨ï¼ˆå®ƒè°ƒç”¨çš„ `doSomething` å‡½æ•°ä½¿ç”¨äº† `someProp`ï¼‰
      }

      function Example({ someProp }) {
        useEffect(() => {
          function doSomething() {
            console.log(someProp);
          }
          doSomething();
        }, [someProp]); // âœ… å®‰å…¨ï¼ˆæˆ‘ä»¬çš„ effect ä»…ç”¨åˆ°äº† `someProp`ï¼‰
      }

      ------------>>>>>
      function Counter() {
        const [count, setCount] = useState(0);

        useEffect(() => {
          const id = setInterval(() => {
            setCount(count + 1); // è¿™ä¸ª effect ä¾èµ–äº `count` state
          }, 1000);
          return () => clearInterval(id);
        }, []); // ğŸ”´ Bug: `count` æ²¡æœ‰è¢«æŒ‡å®šä¸ºä¾èµ–

        return <h1>{count}</h1>;
      }

      ä¼ å…¥ç©ºçš„ä¾èµ–æ•°ç»„ []ï¼Œæ„å‘³ç€è¯¥ hook åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶è¿è¡Œä¸€æ¬¡ï¼Œå¹¶éé‡æ–°æ¸²æŸ“æ—¶ã€‚ä½†å¦‚æ­¤ä¼šæœ‰é—®é¢˜ï¼Œ
      åœ¨ setInterval çš„å›è°ƒä¸­ï¼Œcount çš„å€¼ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚å› ä¸ºå½“ effect æ‰§è¡Œæ—¶ï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªé—­åŒ…ï¼Œ
      å¹¶å°† count çš„å€¼è¢«ä¿å­˜åœ¨è¯¥é—­åŒ…å½“ä¸­ï¼Œä¸”åˆå€¼ä¸º 0ã€‚æ¯éš”ä¸€ç§’ï¼Œå›è°ƒå°±ä¼šæ‰§è¡Œ setCount(0 + 1)ï¼Œ
      å› æ­¤ï¼Œcount æ°¸è¿œä¸ä¼šè¶…è¿‡ 1ã€‚
      æŒ‡å®š [count] ä½œä¸ºä¾èµ–åˆ—è¡¨å°±èƒ½ä¿®å¤è¿™ä¸ª Bugï¼Œä½†ä¼šå¯¼è‡´æ¯æ¬¡æ”¹å˜å‘ç”Ÿæ—¶å®šæ—¶å™¨éƒ½è¢«é‡ç½®ã€‚äº‹å®ä¸Šï¼Œ
      æ¯ä¸ª setInterval åœ¨è¢«æ¸…é™¤å‰ï¼ˆç±»ä¼¼äº setTimeoutï¼‰éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡ã€‚ä½†è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚
      è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ setState çš„å‡½æ•°å¼æ›´æ–°å½¢å¼ã€‚å®ƒå…è®¸æˆ‘ä»¬æŒ‡å®š state è¯¥
      å¦‚ä½• æ”¹å˜è€Œä¸ç”¨å¼•ç”¨ å½“å‰ stateï¼š
      function Counter() {
        const [count, setCount] = useState(0);

        useEffect(() => {
          const id = setInterval(() => {
            setCount(c => c + 1); // âœ… react ä¼šä¼ å…¥æœ€æ–°çš„`count`
          }, 1000);
          return () => clearInterval(id);
        }, []); // âœ… æˆ‘ä»¬çš„ effect ä¸ä½¿ç”¨ç»„ä»¶ä½œç”¨åŸŸä¸­çš„ä»»ä½•å˜é‡

        return <h1>{count}</h1>;
      }
      ï¼ˆsetCount å‡½æ•°çš„èº«ä»½æ˜¯è¢«ç¡®ä¿ç¨³å®šçš„ï¼Œæ‰€ä»¥å¯ä»¥æ”¾å¿ƒçš„çœç•¥æ‰ï¼‰
      æ­¤æ—¶ï¼ŒsetInterval çš„å›è°ƒä¾æ—§æ¯ç§’è°ƒç”¨ä¸€æ¬¡ï¼Œä½†æ¯æ¬¡ setCount å†…éƒ¨çš„å›è°ƒå–åˆ°çš„ count æ˜¯æœ€æ–°å€¼ï¼ˆåœ¨å›è°ƒä¸­å˜é‡å‘½åä¸º cï¼‰ã€‚